{let n=function(){let n=$("#new-post-form");n.submit((function(o){o.preventDefault(),$.ajax({type:"post",url:"/posts/create",data:n.serialize(),success:function(n){console.log(n);let o=e(n.data.post);$("#post-list-container>div").prepend(o),t($(".delete-post-button",o)),new postComments(n.data.post._id),new ToggleLike($(" .toggle-like-button",o)),new Noty({theme:"relax",text:"Post Created!",type:"success",layout:"topRight",timeout:1500}).show()},error:function(n){console.log(n.responseText)}})}))},e=function(n){return $(`\n      <div class="card m-4" id="post-${n._id}">\n      <div class="card-header">\n          <div class="d-flex flex-row justify-content-between">\n              <div class="d-flex flex-row profile-info">\n                  <h3 class="profile-pic-holder" style="width: 55px; height: 55px; margin: 0px 5px;">\n\n                  ${n.user.avatar?`<img src="${n.user.avatar}" alt="image" style = "width: 100%;height: 100%; border-radius: 50px;"alt="image">`:'<img src="/images/codeial-default-avatar2-8bc10ee41e.png" style = "width: 100%;height: 100%; border-radius: 50px;" alt="image">'}\n                      \n                          \n                      \n                  </h3>\n                  <h4 class="text-capitalize profile-name-holder">\n                      ${n.user.name}\n                  </h4>\n              </div>\n              \n              <div class="dropdown dropleft">\n                  <a class="dropdown-toggle" type="button" id="dropdownMenuButton-${n._id}"data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                      <i class="fas fa-ellipsis-v"></i>\n                  </a>\n                  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton-${n._id}">\n                     \n                          <a class="delete-post-button dropdown-item" href="/posts/destroy/${n._id}">Delete</a>\n                     \n                  </div>\n              </div>\n          </div>\n      </div>\n      <div class="card-body">\n             \n\n\n              ${n.postImage?`\n                <div class="posted-image">\n                     <img src="${n.postImage}" alt="post">  \n                </div>\n              `:`\n              <p>\n                <small>\n                     ${n.content}\n                </small>\n                <br>\n             </p>   \n              `}\n               \n           \n              \n          \n      </div>\n     \n          \n          <div class="card-footer text-muted d-flex flex-row">\n              <div class="mx-2">\n                  \n                      \n                          <a class = "toggle-like-button" data-likes = "${n.likes.length}" href="/likes/toggle/?id=${n._id}&type=Post" style="text-decoration: none;">\n                              ${n.likes.length} <i class="far fa-thumbs-up"></i>\n                          </a>  \n                           \n                  \n              </div>\n              <div class="mx-2">\n                  <button class="btn btn-link btn-block" type="button" data-toggle="collapse" \n              data-target="#post-${n._id}-collapse" aria-expanded="true" aria-controls="collapseOne" style="width:140px; text-decoration: none; padding-top: 2px;">\n                  <h4 style="font-size: 1rem; margin-left: -20px;">\n                      <i class="fas fa-comment"></i>\n                      Comments\n                  </h4>\n                  </button>\n              </div>    \n          </div>\n              <div id="post-${n._id}-collapse" class="collapse card-footer" aria-labelledby="headingOne">\n                  <div class="card-body">\n                      <div>\n                          \n                              <form action="/comments/create" method="POST" id="post-${n._id}-comments-form">\n                                  <input type="text" name="content" placeholder="Type here to comment">\n                                  <input type="hidden" name="post" value="${n._id}">\n                                  <input type="submit" value="Add">\n                              </form>\n                          \n                      </div> \n                  \n                          \n                      <div class="post-comments-list">\n                          <ul id="post-comments-${n._id}" style="list-style-type: none; padding: 0px;">\n                              \n                          </ul>\n                      </div>\n                  </div>\n              </div>\n          \n          \n    </div>\n      `)},t=function(n){$(n).click((function(e){e.preventDefault(),$.ajax({type:"get",url:$(n).prop("href"),success:function(n){console.log(n),$("#post-"+n.data.post_id).remove()},error:function(n){console.log(n.responseText)}})}))},o=function(){$("#post-list-container>div>div").each((function(){let n=$(this),e=$(" .delete-post-button",n);t(e);let o=n.prop("id").split("-")[1];new postComments(o)}))};n(),o()}